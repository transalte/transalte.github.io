<!DOCTYPE html>
	<html>
		<head>
			<link rel="stylesheet" type="text/css" href="/css/main.css"/>
			<title>Basic Monosynth</title>
		</head>
		<body>

<div class="grid-container">

<div class="item1">
<div class="logo"><a href="/asp/"><p>TRANSALTE~</p></a></div>

</div>

		<div class="item2">

		</div>

		<div class="item3">
				<div class="sidenav">
					<p>Basic Monosynth</p>
						<ul>
  <li><a href="#overview">Overview</a>
    <ul>
      <li><a href="#first-steps">First Steps</a>
        <ul>
          <li><a href="#simple-monosynth">Simple Monosynth</a></li>
        </ul>
      </li>
      <li><a href="#envelopes">Envelopes</a>
        <ul>
          <li><a href="#standard">Standard</a></li>
          <li><a href="#exponential">Exponential</a></li>
          <li><a href="#modulation">Modulation</a></li>
        </ul>
      </li>
      <li><a href="#velocity">Velocity</a>
        <ul>
          <li><a href="#modulation-1">Modulation</a></li>
          <li><a href="#sensitivity">Sensitivity</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

					</div>


		</div>

		<div class="item4"><h1 id="overview">Overview</h1>

<p>This lession is an introduction to building a basic monophonic subtractive synth. The fundamentals of a synth will be covered including MIDI data processing, oscillators, tuning and envelopes.</p>

<hr />

<h2 id="first-steps">First Steps</h2>

<p>The first step is to create a new <strong>Instrument Device</strong> in Live. The main difference between this template and a <strong>Audio Effect</strong> device is that in place of <code class="highlighter-rouge">plugin~</code> at the input stage there is the <code class="highlighter-rouge">midiin</code> object. This object passes through all of the MIDI data coming from Live into the device that will be utilised to control the patch.</p>

<p>The raw MIDI data from the <code class="highlighter-rouge">midiin</code> contains a range of information:</p>

<ul>
  <li>Note On/Off</li>
  <li>Velocity</li>
  <li>Poly Pressure</li>
  <li>Control change</li>
  <li>Programme change</li>
  <li>Aftertouch</li>
  <li>Pitchbend</li>
  <li>MIDI Channel</li>
</ul>

<p>To access these values individually, the <code class="highlighter-rouge">midiparse</code> object unpacks and converts the raw data into standard messages that can be utilised easily. The most commonly used parameters are Note-On/Off &amp; Velocity (for pitch and volume) and Control Change (for control of other parameters such as filters, effects and so on).</p>

<blockquote>
  <p>Similar to the note information, Control Changes contain two elements; a controller number and the value. Dials, sliders and/or pads on a MIDI device will each be allocated a controller number and interacting with them will change the value (running from 0 to 127). These controllers can be mapped to different elements of a device, or DAW in Live’s case, i.e a filter, a delay’s feedback and so on.</p>
</blockquote>

<p>When pressing keys, MIDI information relating to the note(s) pressed is transmitted in two stages:</p>

<ol>
  <li>Press key down on keyboard - transmits midi note number and how hard it was pressed.</li>
  <li>Release key on keyboard - transmits the same midi note again with a velocity of 0</li>
</ol>

<p>The patch below demonstrates how this information is generated from a key being pressed and released on a MIDI keyboard (or from a note drawn in to a clip in Live).</p>

<p><a href="/assets/img/aasp_monosynth_03.png"><img src="/assets/img/aasp_monosynth_03.png" alt="MIDI Information Parse" /><em>MIDI Information Parse</em></a></p>

<p>What do these numbers relate to?</p>

<p>Each key on the keyboard is allocated a number from 0 to 127:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MIDI Note 0 = C-1

MIDI Note 60 = C4 (Middle C)

MIDI Note 127 = G9
</code></pre></div></div>

<p>The velocity, calculated from how quickly the key is pressed down, is also given a value from 0 to 127.</p>

<hr />

<h3 id="simple-monosynth">Simple Monosynth</h3>

<p>The patch below demonstrates an extremely basic monosynth using only the Note On/Off and Velocity data with the order of processing as follows:</p>

<ol>
  <li>The midi information comes from <code class="highlighter-rouge">midiin</code></li>
  <li>The raw data is broken up via <code class="highlighter-rouge">midiparse</code></li>
  <li>The <strong>NoteOn/Off &amp; Velocity</strong> message pair is extracted and further broken down into midi note value and velocity value</li>
  <li>Velocity is converted from 0 to 127 to a linear amplitude between 0. and 1. through division by 127.</li>
  <li>The midi note value is converted into its correspoding pitch in Hz (via the <code class="highlighter-rouge">mtof</code> object)</li>
  <li>The pitch of the oscillator is changed by the value from <code class="highlighter-rouge">mtof</code></li>
  <li>The amplitude of the signal generated by <code class="highlighter-rouge">cycle~</code> is adjusted via the <code class="highlighter-rouge">*~</code> object which is fed from the scaled velocity value</li>
</ol>

<p><a href="/assets/img/aasp_monosynth_04.png"><img src="/assets/img/aasp_monosynth_04.png" alt="Basic Monosynth" /><em>Basic Monosynth Patch</em></a></p>

<p>The functionality here is quite limited; the envelope of the sound is abruptly turned on and off with the amplitude of each note being controlled by the velocity data.</p>

<p>There are some playability issues with the patch as it is at the moment relating to how the patch copes with overlapping notes. This can be solved by introducing the <code class="highlighter-rouge">ddg.mono</code> object which provides note priority handling:</p>

<p><a href="/assets/img/aasp_monosynth_05.png"><img src="/assets/img/aasp_monosynth_05.png" alt="Note Priority with ddg.mono" /><em>Note priority with ddg.mono</em></a></p>

<h2 id="envelopes">Envelopes</h2>
<p>The envelope of a sound is how it’s amplitude changes over time and is typically described via a the following stages; the attack, decay, sustain and release.</p>

<p><a href="/assets/img/aasp_monosynth_06_env.png"><img src="/assets/img/aasp_monosynth_06_env.png" alt="Standard ADSR Envelope" /><em>Standard ADSR Envelope</em></a></p>

<p>There are a number of ways to create an envelope in Max, each of varying levels of complexity and features. In this example, a standard Attack, Decay, Sustain, Release envelope will be implemented.</p>

<h3 id="standard">Standard</h3>
<p>The <code class="highlighter-rouge">adsr~</code> object is an envelope generator. There are five inlets, the first is allocated to starting the envelope and to what peak amplitide it should go to - this will be fed from the velocity data in the patch. The remaining inlets are for the Attack and Decay times, the sustain level, and the releaes time.</p>

<p><a href="/assets/img/aasp_monosynth_08_adsr01.png"><img src="/assets/img/aasp_monosynth_08_adsr01.png" alt="adsr~ Object" /><em>adsr~ Object</em></a></p>

<p>The object shapes the volume of the sound as follows:</p>

<ol>
  <li>‘Note On’ occurs with velocity &gt; 0 (key pressed): The volume will swell over the attack time to reach the amplitide from velocity.</li>
  <li>With the key held the signal will drop down in amplitude to the sustain level (a fraction of the amplitude) over the decay time.</li>
  <li>When the key is released, the note is sent again with a velocity of 0 (closing the note) and the envelope amplitude will fall to 0 gain over the release time.</li>
</ol>

<p>In the example above, the envelope would be a more percussive sound with no sustain. In the example below, a <code class="highlighter-rouge">scope~</code> object has been connected to the output of the <code class="highlighter-rouge">adsr~</code> to see the envelope generated:</p>

<p><a href="/assets/img/aasp_monosynth_09_env.png"><img src="/assets/img/aasp_monosynth_09_env.png" alt="adsr~ Envelope" /><em>adsr~ Envelope</em></a></p>

<h3 id="exponential">Exponential</h3>
<p>The output from <code class="highlighter-rouge">adsr~</code> is linear by design i.e straight lines between the stages. Exponential envelopes, i.e curved, can sound more natural and are better for persussive sounds in particular.</p>

<p><a href="/assets/img/aasp_monosynth_07_env.png"><img src="/assets/img/aasp_monosynth_07_env.png" alt="Exponential ADSR Envelope" /><em>Exponential ADSR Envelope</em></a></p>

<p>A quick way to achieve this is to multiply the output of the <code class="highlighter-rouge">adsr~</code> envelope by itself:</p>

<p><a href="/assets/img/aasp_monosynth_11_env.png"><img src="/assets/img/aasp_monosynth_11_env.png" alt="Exponential adsr~ Envelope" /><em>Exponential adsr~ Envelope</em></a></p>

<p>Note the change in the curve as the amplitude moves from one value to the next. This curvature would also be present in the attack stages of the envelope too. In this example above, the output from the envelopes are multiplied by themselves to increase the curve of the envelope. This can be useful for transient based sounds such as percussive elements.</p>

<h3 id="modulation">Modulation</h3>

<h2 id="velocity">Velocity</h2>
<p>So far the velocity information has been used to modulate the amplitude of the oscillator output with each keypress.</p>
<h3 id="modulation-1">Modulation</h3>
<h3 id="sensitivity">Sensitivity</h3>

</div>

</div>




</body>
</html>
